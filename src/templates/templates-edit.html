<div class='row'>
  <div class='col'>
    <!-- TAGS -->
    <i class='fas fa-tags'></i>
    <label>{{ 'Tags'|trans }}</label>
    <div class='tags'>
      <span id='tags_div_{{ templateData.id }}'>
        <!--  build the tag array -->
        {% if templateData.tags|length > 0 %}
          {% set tagsIdArr = templateData.tags_id|split(',') %}
          {% set tagsValueArr = templateData.tags|split('|') %}
          {% for key, tag in tagsValueArr %}
            {# the key allows to get the id stored in tagsIdArr #}
            <a class='tag m-1 tag-delete tagUnreference clickable' data-id='{{ templateData.id }}' data-tagid='{{ tagsIdArr[key] }}'>
              {{ tag|raw }}
            </a>
          {% endfor %}
        {% endif %}
      </span>
      <input type='text' style='width:auto' class='createTagInput ml-1' id='createTagInput_{{ templateData.id }}' data-id='{{ templateData.id }}' placeholder='{{ 'Add a tag'|trans }}' />
    </div>
  </div>

  <!-- MORE OPTIONS DROPDOWN MENU (···) -->
  <div class='col'>
    <div class='dropdown'>
      <a class='align-right clickable' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false' title='{{ 'More options'|trans }}' aria-label='{{ 'More options'|trans }}' role='button'>
        <i class='fas fa-ellipsis-h fa-2x'></i>
      </a>
      <div class='dropdown-menu dropdown-menu-right' aria-label='{{ 'More options'|trans }}'>
        <!-- MANAGE PERMISSIONS -->
        <a class='clickable dropdown-item modalToggle' data-modal='permModal' data-read='{{ templateData.canread }}' data-write='{{ templateData.canwrite }}'>
          <i class='fas fa-share-alt fa-fw'></i> {{ 'Manage Permissions'|trans }}
        </a>
        <!-- DOWNLOAD -->
        <a class='clickable dropdown-item saveToFile' data-name='{{ templateData.title }}' data-id='e{{ templateData.id }}'>
          <i class='fas fa-download fa-fw'></i> {{ 'Download template'|trans }}
        </a>
        <!-- DESTROY -->
        <div class='dropdown-divider'></div>
        <a class='clickable dropdown-item destroyTemplate hover-danger' data-id='{{ templateData.id }}'>
          <i class='fas fa-trash-alt fa-fw'></i> {{ 'Destroy template'|trans }}
        </a>
      </div>
    </div>
  </div>

</div>

<form action='app/controllers/UcpController.php' method='post'>
  {{ App.Csrf.getHiddenInput|raw }}
  <input type='hidden' name='tpl_form' />
  <input type='hidden' name='tpl_id' value='{{ templateData.id }}' />
  <label for='tplTitle'>{{ 'Title'|trans }}</label>
  <input id='tplTitle' name='tpl_title' class='form-control' value='{{ templateData.title|raw }}' />
  {# the id begins with an 'e' because of this https://github.com/tinymce/tinymce/issues/3011#issuecomment-227993762 #}
  <label for='e{{ templateData.id }}'>{{ 'Template content'|trans }}</label>
  <textarea id='e{{ templateData.id }}' name='tpl_body' class='mceditable' style='height:500px;'>{{ templateData.body }}</textarea><br />
  <div class='text-center'>
    <button type='submit' name='Submit' class='button btn btn-primary'>{{ 'Save'|trans }}</button>
  </div>
</form>
{% include('steps-links-edit.html') %}
{{ include('json-editor.html') }}
